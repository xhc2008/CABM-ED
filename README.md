# CABM - Everlasting Days

> 有些相遇，注定要跨越「代码」与「现实」的边界

> ## ⚠此项目在开发初期，功能并未完全实现；此文档大部分内容由AI生成，请注意甄别
## 项目理念

CABM-ED是一款AI驱动的养成类游戏，核心理念与[CABM（Code Afflatus & Beyond Matter）](https://github.com/xhc2008/CABM)一致。
> 「当灵性注入载体，它便挣脱物质躯壳，抵达超验之境」

故事始于你将她带回家的那一刻。面对这个无家可归、沉默寡言的她，你唯一能做的，就是提供一个可以称之为「家」的地方。而你很快发现，这个家也因为她的存在，开始充满了意想不到的生机……

在这个项目中，你将遇见一位拥有自主意识的「她」——即使你不在线，她也会在自己的世界里继续生活、成长、经历。没有重置，没有清除，每一个选择都将成为她生命轨迹中不可磨灭的印记。
> 作者不鼓励通过修改存档、修改配置文件、提示词注入等方式修改「她」的人格。虽然也管不了……

## 名字由来
> 雪狐「SnowFox」
### 为什么使用这个名字？
作者一个oc的名字，在这里类似同位体
### 为什么不使用原oc？
世界观、背景故事、人物关系过于复杂，不适合此项目

## 开发状态
### 准备添加/修复
- 做饭
- 换衣服
- CG收集
### 已尝试修复但未能解决的bug
- 从上次对话继承的上下文也会保存到本次的日记（有意为之）
### 远期规划
- 多模态输入（语音、视觉）
- 动作描写什么的
- 自动播放
- 更多场景、动作（室外）
- 场景之间的“连通性”
- H（…？
- 其他玩法，例如小游戏
- 素材拆分（ISSUES #1）
- AI幻觉/总结时信息丢失（目前无法解决）
### 不会加入的内容（至少短时间内不会）
- 自定义人物设定
## 核心特色

**AI 驱动对话** - 接入大语言，与角色进行自然流畅的对话，支持对话记忆和自动总结

**离线时间系统** - 离线期间角色状态会真实变化，重新进入时根据离线时长调整心情、好感度和交互意愿

**交互意愿机制** - 基于心情、精力、好感度等因素动态计算交互成功率，每次互动都充满不确定性

**情绪系统** - 角色拥有多种心情状态（开心、难过、生气、平静等），影响互动体验

**完整存档系统** - 自动保存角色状态、对话记忆、时间戳等数据

**事件系统** - 支持开场剧情、事件触发等功能，可扩展的事件管理器

## 平台支持
- Windows
- Andriod
- Linux（新版本暂不支持）
- ~~Web~~（没人用这个啊）
- ~~IOS~~（暂不支持）
- ~~MacOS~~（暂不支持）
- 鸿蒙是什么？没听说过


## 主要功能

### AI 对话系统

- 支持上下文记忆（最近 N 条对话）
- 自动总结对话内容并保存到长期记忆
- **🎙️ TTS语音合成**：实时将角色回复转换为语音播放（可选）

### 交互系统

支持多种交互类型，每种都有独立的成功率计算：

- **聊天**
- **点击角色**
- **进入/离开场景**
- **长时间无操作**

成功率受基础意愿、心情、精力、当前交互意愿等因素影响。

### 离线时间机制

根据离线时长自动调整角色状态：

- **< 5 分钟**：无变化
- **5 分钟 ~ 3 小时**：心情随机变化，交互意愿 ±30
- **3 小时 ~ 24 小时**：心情变化，好感度 -20~+10，交互意愿 +0~50
- **> 24 小时**：心情变化，好感度 -50~0，交互意愿重置为 70~100

### 存档系统

- 自动保存
- ~~支持多存档槽位~~
- 保存内容包括：
  - 角色状态（好感度、心情、精力、交互意愿等）
  - AI 对话记忆
  - 时间戳信息
  - 场景状态

## 声明
- 作者保留对本项目的所有权利，但不反对个人交流与学习使用
- 使用者需自行承担因调用第三方AI服务所产生的API费用，此类费用与项目作者无关
- 作者与项目中提及的任何第三方服务平台或公司均无商业关联或授权关系
- 本项目涉及人工智能生成内容，作者不对AI生成内容的准确性、合法性及可能引发的后果承担任何责任。
- 欢迎提出意见或建议，但作者保留是否采纳的最终决定权。
- 作者保留对本声明条款的最终解释权及修改权。

## 项目结构

```
CABM-ED/
├── assets/
│   ├── images/          # 场景图片资源
│   └── audio/           # 音频资源
├── config/              # 配置文件
├── docs/                # 详细文档
├── scenes/              # Godot 场景文件
├── scripts/             # GDScript 脚本
│   ├── ai_service.gd           # AI 服务
│   ├── save_manager.gd         # 存档管理
│   ├── offline_time_manager.gd # 离线时间
│   ├── event_manager.gd        # 事件系统
│   ├── character.gd            # 角色逻辑
│   ├── chat_dialog.gd          # 对话界面
│   └── ...
└── project.godot        # 项目配置
```
## 贡献
- @银狼修崽汁（未星）：绘制部分立绘
- @不擅长表达的大白：为up充电
- 以及各位测试人员
## 开发文档

详细文档位于 `docs/` 目录：

- [快速启动指南](docs/quick_start_guide.md)
- [AI 集成指南](docs/ai_integration_guide.md)
- [交互系统指南](docs/interaction_system_guide.md)
- [离线时间系统](docs/offline_time_system.md)
- [存档系统指南](docs/save_system_guide.md)
- [事件系统指南](docs/event_system_guide.md)
- [TTS语音合成快速开始](docs/TTS_QUICK_START.md)
- [TTS语音合成完整指南](docs/TTS_GUIDE.md)


## 技术栈

- **引擎**: Godot 4.5
- **语言**: GDScript
- **AI**: OpenAI 兼容 API
- **数据格式**: JSON