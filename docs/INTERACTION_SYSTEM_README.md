# äº¤äº’æ„æ„¿ç³»ç»Ÿ - å®Œæ•´å®ç°

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ ¸å¿ƒç³»ç»Ÿ
- âœ… äº¤äº’æ„æ„¿åˆ¤å®šç³»ç»Ÿ
- âœ… å­˜æ¡£ç³»ç»Ÿï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰
- âœ… è§’è‰²æ•°æ®ç®¡ç†
- âœ… å¤±è´¥åé¦ˆæœºåˆ¶
- âœ… å†·å´æ—¶é—´ç³»ç»Ÿ

### 2. UI æ˜¾ç¤º
- âœ… å·¦ä¾§è¾¹æ æ˜¾ç¤ºè§’è‰²çŠ¶æ€
  - å¥½æ„Ÿåº¦
  - äº¤äº’æ„æ„¿
  - å¿ƒæƒ…ï¼ˆå¸¦é¢œè‰²ï¼‰
  - ç²¾åŠ›
  - ä¿¡ä»»ç­‰çº§
- âœ… å¤±è´¥æ¶ˆæ¯æç¤º
- âœ… è‡ªåŠ¨ä¿å­˜æç¤º

### 3. è‡ªåŠ¨ä¿å­˜
- âœ… æ¯5åˆ†é’Ÿè‡ªåŠ¨ä¿å­˜
- âœ… ä¿å­˜æ—¶é—´æˆ³è®°å½•
- âœ… å¤šæ§½ä½æ”¯æŒ

## ğŸ“ æ–‡ä»¶ç»“æ„

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ interaction_config.json      # äº¤äº’é…ç½®
â”‚   â””â”€â”€ save_data_template.json      # å­˜æ¡£æ¨¡æ¿
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ interaction_manager.gd       # äº¤äº’ç®¡ç†å™¨
â”‚   â”œâ”€â”€ save_manager.gd              # å­˜æ¡£ç®¡ç†å™¨
â”‚   â”œâ”€â”€ interaction_test.gd          # æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ main.gd                      # ä¸»åœºæ™¯ï¼ˆå·²é›†æˆï¼‰
â”‚   â””â”€â”€ sidebar.gd                   # ä¾§è¾¹æ ï¼ˆå·²é›†æˆï¼‰
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ interaction_system_guide.md  # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ save_system_guide.md         # å­˜æ¡£ç³»ç»ŸæŒ‡å—
â”‚   â”œâ”€â”€ interaction_system_summary.md # ç³»ç»Ÿæ€»ç»“
â”‚   â”œâ”€â”€ setup_autoload.md            # è‡ªåŠ¨åŠ è½½é…ç½®
â”‚   â””â”€â”€ quick_start_guide.md         # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â””â”€â”€ project.godot                     # å·²æ·»åŠ è‡ªåŠ¨åŠ è½½é…ç½®
```

## ğŸ® äº¤äº’æœºåˆ¶

### æˆåŠŸæ¦‚ç‡å…¬å¼
```
å®é™…æˆåŠŸç‡ = (åŸºç¡€æ„æ„¿ + å½“å‰äº¤äº’æ„æ„¿ - 100)% + ä¿®æ­£å› å­
```

### åŠ¨ä½œç±»å‹

| åŠ¨ä½œID | åç§° | åŸºç¡€æ„æ„¿ | å¤±è´¥åé¦ˆ | è§¦å‘æ–¹å¼ |
|--------|------|----------|----------|----------|
| chat | èŠå¤© | 150% | æ˜¾ç¤ºæ¶ˆæ¯ | ç‚¹å‡»èŠå¤©æŒ‰é’® |
| click_character | ç‚¹å‡»è§’è‰² | 120% | æ˜¾ç¤ºæ¶ˆæ¯ | ç‚¹å‡»è§’è‰² |
| gift | é€ç¤¼ç‰© | 200% | æ˜¾ç¤ºæ¶ˆæ¯ | é€ç¤¼æŒ‰é’® |
| pat_head | æ‘¸å¤´ | 100% | æ˜¾ç¤ºæ¶ˆæ¯ | æ‘¸å¤´æŒ‰é’® |
| call_name | å‘¼å”¤åå­— | 90% | æ˜¾ç¤ºæ¶ˆæ¯ | å‘¼å”¤æŒ‰é’® |
| enter_scene | è¿›å…¥åœºæ™¯ | 80% | æ— äº‹å‘ç”Ÿ | **è‡ªåŠ¨è§¦å‘** |
| leave_scene | ç¦»å¼€åœºæ™¯ | 40% | æ— äº‹å‘ç”Ÿ | **è‡ªåŠ¨è§¦å‘** |

### ä¿®æ­£å› å­

**å¿ƒæƒ…ä¿®æ­£**:
- happy: +20%
- excited: +30%
- normal: 0%
- sad: -20%
- angry: -40%

**ç²¾åŠ›ä¿®æ­£**:
- high (80-100): +10%
- normal (40-79): 0%
- low (20-39): -15%
- exhausted (0-19): -30%

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é‡å¯ç¼–è¾‘å™¨
**å¿…é¡»é‡å¯ Godot ç¼–è¾‘å™¨**ï¼Œè®©è‡ªåŠ¨åŠ è½½é…ç½®ç”Ÿæ•ˆã€‚

### 2. éªŒè¯é…ç½®
æ‰“å¼€ **é¡¹ç›® > é¡¹ç›®è®¾ç½® > è‡ªåŠ¨åŠ è½½**ï¼Œç¡®è®¤ï¼š
- SaveManager
- InteractionManager

### 3. è¿è¡Œæ¸¸æˆ
æŒ‰ F5 è¿è¡Œï¼Œå·¦ä¾§è¾¹æ ä¼šæ˜¾ç¤ºè§’è‰²çŠ¶æ€ã€‚

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### å°è¯•äº¤äº’
```gdscript
var interaction_mgr = get_node("/root/InteractionManager")
var success = interaction_mgr.try_interaction("chat")
if success:
    # å¼€å§‹èŠå¤©
    start_chat()
```

### ä¿®æ”¹æ•°æ®
```gdscript
var save_mgr = get_node("/root/SaveManager")
save_mgr.add_affection(10)  # å¢åŠ å¥½æ„Ÿåº¦
save_mgr.set_mood("happy")  # è®¾ç½®å¿ƒæƒ…
```

### æŸ¥è¯¢çŠ¶æ€
```gdscript
var save_mgr = get_node("/root/SaveManager")
var interaction_mgr = get_node("/root/InteractionManager")

print("äº¤äº’æ„æ„¿: ", save_mgr.get_reply_willingness())
print("èŠå¤©æˆåŠŸç‡: ", interaction_mgr.calculate_success_chance("chat") * 100, "%")
```

## ğŸ§ª æµ‹è¯•å·¥å…·

ä½¿ç”¨ `interaction_test.gd` è„šæœ¬ï¼š
1. é™„åŠ åˆ°ä»»æ„èŠ‚ç‚¹
2. è¿è¡Œæ¸¸æˆ
3. æŒ‰æ•°å­—é”®æµ‹è¯•å„ç§åŠŸèƒ½

æŒ‰é”®è¯´æ˜ï¼š
- `1` - æµ‹è¯•èŠå¤©
- `2` - æµ‹è¯•ç‚¹å‡»è§’è‰²
- `4` - æŸ¥çœ‹å½“å‰çŠ¶æ€
- `5/6` - å¢åŠ /å‡å°‘äº¤äº’æ„æ„¿
- `7/8` - è®¾ç½®å¥½/åå¿ƒæƒ…
- `9` - é‡ç½®æ•°æ®
- `0` - æ˜¾ç¤ºæ‰€æœ‰æˆåŠŸç‡

## âš™ï¸ é…ç½®è°ƒæ•´

### ä¿®æ”¹åŸºç¡€æ„æ„¿
ç¼–è¾‘ `config/interaction_config.json`:
```json
{
  "actions": {
    "chat": {
      "base_willingness": 150  // æ”¹è¿™é‡Œ
    }
  }
}
```

### ä¿®æ”¹åˆå§‹æ•°å€¼
ç¼–è¾‘ `config/save_data_template.json`:
```json
{
  "save_slots": {
    "slot_1": {
      "character_data": {
        "affection": 0,           // åˆå§‹å¥½æ„Ÿåº¦
        "reply_willingness": 100  // åˆå§‹äº¤äº’æ„æ„¿
      }
    }
  }
}
```

### ä¿®æ”¹è‡ªåŠ¨ä¿å­˜é—´éš”
ç¼–è¾‘ `scripts/sidebar.gd`:
```gdscript
auto_save_timer.wait_time = 300.0  // ç§’æ•°ï¼ˆ300 = 5åˆ†é’Ÿï¼‰
```

## ğŸ“Š æ•°æ®è¯´æ˜

### è§’è‰²æ•°æ®
- **å¥½æ„Ÿåº¦** (0-100): å½±å“è§’è‰²å¯¹ç©å®¶çš„æ€åº¦
- **äº¤äº’æ„æ„¿** (0-100): å½±å“æ‰€æœ‰äº¤äº’çš„æˆåŠŸç‡
- **å¿ƒæƒ…**: happy, excited, normal, sad, angry
- **ç²¾åŠ›** (0-100): å½±å“äº¤äº’æˆåŠŸç‡
- **ä¿¡ä»»ç­‰çº§** (0-100): è§£é”ç‰¹æ®Šå†…å®¹

### å­˜æ¡£ä½ç½®
- Windows: `%APPDATA%/Godot/app_userdata/CABM-ED/saves/`
- Linux: `~/.local/share/godot/app_userdata/CABM-ED/saves/`
- macOS: `~/Library/Application Support/Godot/app_userdata/CABM-ED/saves/`

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ§åˆ¶å°
è¿è¡Œæ—¶è§‚å¯Ÿè¾“å‡ºï¼š
```
å­˜æ¡£æ¨¡æ¿å·²åŠ è½½
äº¤äº’é…ç½®å·²åŠ è½½
åŠ¨ä½œ: chat æˆåŠŸç‡: 130% æ·éª°: 0.45 ç»“æœ: æˆåŠŸ
è‡ªåŠ¨ä¿å­˜å®Œæˆ
```

### å¸¸è§é—®é¢˜

**Q: çœ‹ä¸åˆ°è§’è‰²çŠ¶æ€ï¼Ÿ**
A: é‡å¯ Godot ç¼–è¾‘å™¨

**Q: äº¤äº’æ€»æ˜¯å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥äº¤äº’æ„æ„¿å€¼ï¼Œå¯èƒ½å¤ªä½äº†

**Q: æƒ³è¦100%æˆåŠŸï¼Ÿ**
A: è®¾ç½®äº¤äº’æ„æ„¿ä¸º100ï¼Œå¿ƒæƒ…ä¸ºhappy

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](docs/quick_start_guide.md) - æ–°æ‰‹å¿…è¯»
- [äº¤äº’ç³»ç»ŸæŒ‡å—](docs/interaction_system_guide.md) - å®Œæ•´APIæ–‡æ¡£
- [å­˜æ¡£ç³»ç»ŸæŒ‡å—](docs/save_system_guide.md) - å­˜æ¡£ç®¡ç†
- [ç³»ç»Ÿæ€»ç»“](docs/interaction_system_summary.md) - æŠ€æœ¯ç»†èŠ‚

## ğŸ¯ ä¸‹ä¸€æ­¥æ‰©å±•

1. **æ·»åŠ æ›´å¤šåŠ¨ä½œ** - åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ 
2. **å®ç°å¥½æ„Ÿåº¦å¢é•¿** - æˆåŠŸäº¤äº’æ—¶å¢åŠ 
3. **æ·»åŠ äº‹ä»¶ç³»ç»Ÿ** - ç‰¹å®šæ¡ä»¶è§¦å‘äº‹ä»¶
4. **å®ç°æ—¶é—´ç³»ç»Ÿ** - æ ¹æ®æ—¶é—´è°ƒæ•´æ„æ„¿
5. **æ·»åŠ æˆå°±ç³»ç»Ÿ** - è®°å½•ç©å®¶è¡Œä¸º

## âœ¨ ç‰¹æ€§äº®ç‚¹

- ğŸ² **æ¦‚ç‡ç³»ç»Ÿ** - çœŸå®çš„éšæœºåˆ¤å®š
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜** - ä¸ç”¨æ‹…å¿ƒæ•°æ®ä¸¢å¤±
- ğŸ“Š **å®æ—¶æ˜¾ç¤º** - å·¦ä¾§è¾¹æ å®æ—¶æ›´æ–°
- ğŸ¨ **é¢œè‰²åé¦ˆ** - æ•°å€¼é«˜ä½ç”¨é¢œè‰²åŒºåˆ†
- â±ï¸ **å†·å´æœºåˆ¶** - é˜²æ­¢é¢‘ç¹å°è¯•
- ğŸ”§ **æ˜“äºé…ç½®** - JSONé…ç½®æ–‡ä»¶
- ğŸ§ª **æµ‹è¯•å·¥å…·** - å¿«é€Ÿè°ƒè¯•

---

**ç³»ç»Ÿå·²å®Œå…¨å¯ç”¨ï¼** é‡å¯ç¼–è¾‘å™¨åå³å¯å¼€å§‹ä½¿ç”¨ã€‚

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–æ§åˆ¶å°è¾“å‡ºã€‚
