# é…ç½®ç³»ç»Ÿæµ‹è¯•æŒ‡å—

## æµ‹è¯•ç›®çš„
éªŒè¯éŸ³é¢‘é…ç½®ç³»ç»Ÿåœ¨å¼€å‘ç¯å¢ƒå’Œæ‰“åŒ…åéƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

## æµ‹è¯•ç¯å¢ƒ

### å¼€å‘ç¯å¢ƒæµ‹è¯•
åœ¨Godotç¼–è¾‘å™¨ä¸­è¿è¡Œæ¸¸æˆ

### æ‰“åŒ…ç¯å¢ƒæµ‹è¯•
- Windows: å¯¼å‡ºä¸º .exe
- Android: å¯¼å‡ºä¸º .apk
- Linux: å¯¼å‡ºä¸ºå¯æ‰§è¡Œæ–‡ä»¶
- macOS: å¯¼å‡ºä¸º .app

## æµ‹è¯•ç”¨ä¾‹

### 1. é…ç½®æ–‡ä»¶åŠ è½½æµ‹è¯•

**æ­¥éª¤**ï¼š
1. å¯åŠ¨æ¸¸æˆ
2. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

**é¢„æœŸç»“æœ**ï¼š
```
âœ… é»˜è®¤éŸ³é¢‘é…ç½®å·²åŠ è½½
â„¹ï¸ ç”¨æˆ·éŸ³é¢‘è®¾ç½®ä¸å­˜åœ¨ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼
ğŸ”Š éŸ³é‡è®¾ç½®: BGM=30%, æ°›å›´éŸ³=30%
```

**éªŒè¯ç‚¹**ï¼š
- [ ] é»˜è®¤é…ç½®æˆåŠŸåŠ è½½
- [ ] éŸ³é‡è®¾ç½®æ­£ç¡®åº”ç”¨
- [ ] æ²¡æœ‰é”™è¯¯ä¿¡æ¯

### 2. éŸ³é‡ä¿å­˜æµ‹è¯•

**æ­¥éª¤**ï¼š
1. æ‰“å¼€éŸ³ä¹æ’­æ”¾å™¨é¢æ¿
2. è°ƒæ•´BGMéŸ³é‡åˆ°50%
3. è°ƒæ•´æ°›å›´éŸ³éŸ³é‡åˆ°70%
4. å…³é—­æ¸¸æˆ
5. é‡æ–°å¯åŠ¨æ¸¸æˆ

**é¢„æœŸç»“æœ**ï¼š
```
âœ… é»˜è®¤éŸ³é¢‘é…ç½®å·²åŠ è½½
âœ… ç”¨æˆ·éŸ³é¢‘è®¾ç½®å·²åŠ è½½
ğŸ”Š éŸ³é‡è®¾ç½®: BGM=50%, æ°›å›´éŸ³=70%
ğŸ’¾ ç”¨æˆ·éŸ³é¢‘è®¾ç½®å·²ä¿å­˜åˆ°: user://audio_settings.json
```

**éªŒè¯ç‚¹**ï¼š
- [ ] éŸ³é‡è®¾ç½®è¢«ä¿å­˜
- [ ] é‡å¯åéŸ³é‡æ¢å¤åˆ°ä¸Šæ¬¡è®¾ç½®
- [ ] user://audio_settings.json æ–‡ä»¶å­˜åœ¨

### 3. è‡ªå®šä¹‰BGMä¿å­˜æµ‹è¯•

**æ­¥éª¤**ï¼š
1. ä¸Šä¼ ä¸€ä¸ªè‡ªå®šä¹‰BGM
2. æ’­æ”¾è¯¥BGM
3. å…³é—­æ¸¸æˆ
4. é‡æ–°å¯åŠ¨æ¸¸æˆ

**é¢„æœŸç»“æœ**ï¼š
```
âœ… ç”¨æˆ·éŸ³é¢‘è®¾ç½®å·²åŠ è½½
ğŸµ æ¢å¤ä¸Šæ¬¡æ’­æ”¾çš„BGM: user://custom_bgm/test.ogg
âœ… æ’­æ”¾è‡ªå®šä¹‰BGM: user://custom_bgm/test.ogg
```

**éªŒè¯ç‚¹**ï¼š
- [ ] BGMè·¯å¾„è¢«ä¿å­˜
- [ ] é‡å¯åè‡ªåŠ¨æ’­æ”¾ä¸Šæ¬¡çš„BGM
- [ ] æ–‡ä»¶è·¯å¾„æ­£ç¡®

### 4. æ‰“åŒ…åé…ç½®æµ‹è¯•ï¼ˆé‡è¦ï¼ï¼‰

**æ­¥éª¤**ï¼š
1. å¯¼å‡ºæ¸¸æˆåˆ°ç›®æ ‡å¹³å°
2. åœ¨ç›®æ ‡å¹³å°è¿è¡Œæ¸¸æˆ
3. è°ƒæ•´éŸ³é‡è®¾ç½®
4. ä¸Šä¼ å¹¶æ’­æ”¾è‡ªå®šä¹‰BGM
5. å…³é—­æ¸¸æˆ
6. é‡æ–°å¯åŠ¨æ¸¸æˆ

**é¢„æœŸç»“æœ**ï¼š
- æ‰€æœ‰è®¾ç½®éƒ½èƒ½æ­£å¸¸ä¿å­˜å’Œæ¢å¤
- æ²¡æœ‰"æƒé™æ‹’ç»"æˆ–"æ–‡ä»¶ä¸å­˜åœ¨"é”™è¯¯

**éªŒè¯ç‚¹**ï¼š
- [ ] æ‰“åŒ…åèƒ½æ­£å¸¸åŠ è½½é»˜è®¤é…ç½®
- [ ] æ‰“åŒ…åèƒ½åˆ›å»ºç”¨æˆ·è®¾ç½®æ–‡ä»¶
- [ ] æ‰“åŒ…åèƒ½ä¿å­˜éŸ³é‡è®¾ç½®
- [ ] æ‰“åŒ…åèƒ½ä¿å­˜è‡ªå®šä¹‰BGMè·¯å¾„
- [ ] é‡å¯åæ‰€æœ‰è®¾ç½®æ­£ç¡®æ¢å¤

### 5. è·¨å¹³å°è·¯å¾„æµ‹è¯•

**Windowsæµ‹è¯•**ï¼š
```
ç”¨æˆ·è®¾ç½®è·¯å¾„: %APPDATA%\Godot\app_userdata\[é¡¹ç›®å]\audio_settings.json
è‡ªå®šä¹‰BGMè·¯å¾„: %APPDATA%\Godot\app_userdata\[é¡¹ç›®å]\custom_bgm\
```

**Androidæµ‹è¯•**ï¼š
```
ç”¨æˆ·è®¾ç½®è·¯å¾„: /data/data/[åŒ…å]/files/audio_settings.json
è‡ªå®šä¹‰BGMè·¯å¾„: /data/data/[åŒ…å]/files/custom_bgm/
```

**éªŒè¯ç‚¹**ï¼š
- [ ] æ–‡ä»¶è·¯å¾„ç¬¦åˆå¹³å°è§„èŒƒ
- [ ] æ–‡ä»¶å¯ä»¥æ­£å¸¸è¯»å†™
- [ ] åº”ç”¨å¸è½½å‰æ•°æ®æŒä¹…åŒ–

### 6. é”™è¯¯æ¢å¤æµ‹è¯•

**æ­¥éª¤**ï¼š
1. æ‰‹åŠ¨åˆ é™¤ user://audio_settings.json
2. å¯åŠ¨æ¸¸æˆ

**é¢„æœŸç»“æœ**ï¼š
```
â„¹ï¸ ç”¨æˆ·éŸ³é¢‘è®¾ç½®ä¸å­˜åœ¨ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼
ğŸ”Š éŸ³é‡è®¾ç½®: BGM=30%, æ°›å›´éŸ³=30%
```

**éªŒè¯ç‚¹**ï¼š
- [ ] æ¸¸æˆä¸ä¼šå´©æºƒ
- [ ] è‡ªåŠ¨ä½¿ç”¨é»˜è®¤è®¾ç½®
- [ ] å¯ä»¥é‡æ–°ä¿å­˜è®¾ç½®

### 7. æ— æ•ˆBGMè·¯å¾„æµ‹è¯•

**æ­¥éª¤**ï¼š
1. æ‰‹åŠ¨ç¼–è¾‘ user://audio_settings.json
2. è®¾ç½®ä¸€ä¸ªä¸å­˜åœ¨çš„BGMè·¯å¾„
3. å¯åŠ¨æ¸¸æˆ

**é¢„æœŸç»“æœ**ï¼š
```
âš ï¸ ä¸Šæ¬¡æ’­æ”¾çš„BGMæ–‡ä»¶ä¸å­˜åœ¨: user://custom_bgm/deleted.ogg
ğŸ’¾ ç”¨æˆ·éŸ³é¢‘è®¾ç½®å·²ä¿å­˜åˆ°: user://audio_settings.json
```

**éªŒè¯ç‚¹**ï¼š
- [ ] æ¸¸æˆä¸ä¼šå´©æºƒ
- [ ] è‡ªåŠ¨æ¸…é™¤æ— æ•ˆè·¯å¾„
- [ ] ä¿å­˜æ›´æ–°åçš„é…ç½®

## æµ‹è¯•å·¥å…·

### æŸ¥çœ‹ç”¨æˆ·é…ç½®æ–‡ä»¶

**Windows**:
```cmd
notepad %APPDATA%\Godot\app_userdata\[é¡¹ç›®å]\audio_settings.json
```

**Linux/Mac**:
```bash
cat ~/.local/share/godot/app_userdata/[é¡¹ç›®å]/audio_settings.json
```

**Android** (éœ€è¦rootæˆ–è°ƒè¯•æ¨¡å¼):
```bash
adb shell cat /data/data/[åŒ…å]/files/audio_settings.json
```

### æ¸…é™¤ç”¨æˆ·é…ç½®ï¼ˆé‡ç½®æµ‹è¯•ï¼‰

**Windows**:
```cmd
del %APPDATA%\Godot\app_userdata\[é¡¹ç›®å]\audio_settings.json
```

**Linux/Mac**:
```bash
rm ~/.local/share/godot/app_userdata/[é¡¹ç›®å]/audio_settings.json
```

## è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

```gdscript
# test_audio_config.gd
extends Node

func _ready():
    test_config_system()

func test_config_system():
    print("=== å¼€å§‹é…ç½®ç³»ç»Ÿæµ‹è¯• ===")
    
    # æµ‹è¯•1: æ£€æŸ¥é»˜è®¤é…ç½®
    var audio_mgr = get_node("/root/Main/AudioManager")
    assert(audio_mgr != null, "AudioManagerå­˜åœ¨")
    
    # æµ‹è¯•2: æ£€æŸ¥éŸ³é‡èŒƒå›´
    var bgm_vol = audio_mgr.get_bgm_volume()
    assert(bgm_vol >= 0.0 and bgm_vol <= 1.0, "BGMéŸ³é‡åœ¨æœ‰æ•ˆèŒƒå›´")
    
    # æµ‹è¯•3: ä¿å­˜å’ŒåŠ è½½
    audio_mgr.set_bgm_volume(0.5)
    await get_tree().create_timer(0.1).timeout
    
    # æµ‹è¯•4: æ£€æŸ¥æ–‡ä»¶å­˜åœ¨
    var user_config_path = "user://audio_settings.json"
    assert(FileAccess.file_exists(user_config_path), "ç”¨æˆ·é…ç½®æ–‡ä»¶å·²åˆ›å»º")
    
    print("=== é…ç½®ç³»ç»Ÿæµ‹è¯•å®Œæˆ ===")
```

## æµ‹è¯•æ¸…å•

### å¼€å‘é˜¶æ®µ
- [ ] é»˜è®¤é…ç½®åŠ è½½æ­£å¸¸
- [ ] éŸ³é‡è°ƒèŠ‚æ­£å¸¸
- [ ] éŸ³é‡ä¿å­˜æ­£å¸¸
- [ ] è‡ªå®šä¹‰BGMä¿å­˜æ­£å¸¸
- [ ] é‡å¯åè®¾ç½®æ¢å¤æ­£å¸¸

### æ‰“åŒ…å‰
- [ ] æ¸…ç†æµ‹è¯•æ•°æ®
- [ ] éªŒè¯é»˜è®¤é…ç½®æ–‡ä»¶å®Œæ•´
- [ ] éªŒè¯è·¯å¾„ä½¿ç”¨æ­£ç¡®ï¼ˆuser:// vs res://ï¼‰

### æ‰“åŒ…åï¼ˆWindowsï¼‰
- [ ] é…ç½®åŠ è½½æ­£å¸¸
- [ ] é…ç½®ä¿å­˜æ­£å¸¸
- [ ] è·¯å¾„æ­£ç¡®
- [ ] é‡å¯åæ¢å¤æ­£å¸¸

### æ‰“åŒ…åï¼ˆAndroidï¼‰
- [ ] é…ç½®åŠ è½½æ­£å¸¸
- [ ] é…ç½®ä¿å­˜æ­£å¸¸
- [ ] è·¯å¾„æ­£ç¡®
- [ ] é‡å¯åæ¢å¤æ­£å¸¸
- [ ] åº”ç”¨åˆ‡æ¢åçŠ¶æ€æ­£å¸¸

### æ‰“åŒ…åï¼ˆiOSï¼‰
- [ ] é…ç½®åŠ è½½æ­£å¸¸
- [ ] é…ç½®ä¿å­˜æ­£å¸¸
- [ ] è·¯å¾„æ­£ç¡®
- [ ] é‡å¯åæ¢å¤æ­£å¸¸
- [ ] åº”ç”¨åˆ‡æ¢åçŠ¶æ€æ­£å¸¸

## å·²çŸ¥é—®é¢˜

### é—®é¢˜1: æ‰“åŒ…åæ— æ³•ä¿å­˜é…ç½®
**åŸå› **: ä½¿ç”¨äº† res:// è·¯å¾„
**è§£å†³**: æ”¹ç”¨ user:// è·¯å¾„

### é—®é¢˜2: Androidä¸Šè·¯å¾„é”™è¯¯
**åŸå› **: ä½¿ç”¨äº†ç»å¯¹è·¯å¾„
**è§£å†³**: ä½¿ç”¨ user:// ç›¸å¯¹è·¯å¾„

### é—®é¢˜3: é…ç½®æ–‡ä»¶æŸå
**åŸå› **: JSONæ ¼å¼é”™è¯¯
**è§£å†³**: æ·»åŠ é”™è¯¯å¤„ç†ï¼Œä½¿ç”¨é»˜è®¤é…ç½®

## æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```
æµ‹è¯•æ—¥æœŸ: YYYY-MM-DD
æµ‹è¯•å¹³å°: [Windows/Android/iOS/Linux/macOS]
æµ‹è¯•ç‰ˆæœ¬: [ç‰ˆæœ¬å·]

æµ‹è¯•ç»“æœ:
âœ… é…ç½®åŠ è½½: é€šè¿‡
âœ… éŸ³é‡ä¿å­˜: é€šè¿‡
âœ… BGMä¿å­˜: é€šè¿‡
âœ… é‡å¯æ¢å¤: é€šè¿‡
âœ… è·¯å¾„æ­£ç¡®: é€šè¿‡

é—®é¢˜è®°å½•:
[æ— /æè¿°é—®é¢˜]

å¤‡æ³¨:
[å…¶ä»–è¯´æ˜]
```

## æ›´æ–°æ—¥å¿—

- **2024-10-31**: åˆå§‹ç‰ˆæœ¬ï¼Œæ·»åŠ é…ç½®ç³»ç»Ÿæµ‹è¯•æŒ‡å—
